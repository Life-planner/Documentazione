\section{User Flows}
\label{secD4:UserFlows}

In questa sezione del documento di sviluppo riportiamo gli “user flows” riguardanti, soprattutto, il ruolo dell'utente autenticato nel nostro sito.
Questa figura descrive gli "user flows" relativi alle funzionalità che abbiamo reso disponibili in questo prototipo dell'applicativo PlanIt. Come si può notare dall'"user flow", l'utente, una volta autenticato, se non è la prima che accede al sito, visualizza la schermata "Calendario", schermata principale della nostra piattaforma. La procedura di autenticazione da parte dell'utente può contenere varie varianti; infatti l'utente ha la possibilità sia di accedere/registrarsi mediante proprie credenziali sia mediante un proprio account Google. Nel caso in cui si fosse registrato mediante credenziali e avesse dimenticato la propria password, l'utente ha la possibilità di fare il "reset password" per recuperare il proprio account indicando a quale indirizzo email inviare l'email di recupero. \\ Inoltre, per il bivio "token di accesso ancora valido" si intende dire che, dopo aver fatto l'accesso al sito da un broswer, si ottiene un token, per cui le seguenti volte, per un periodo di tempo (il "time to live" di tale token) viene fatto direttamente l'indirizzamento alla pagina "Calendario", dopo aver premuto su "Login", senza dover inserire di nuovo le proprie credenziali di accesso. Ma, la prima volta che si fa accesso su PlanIt, quindi dopo la registrazione, prima di essere indirizzato alla schermata "Calendario", l'utente autenticato è indirizzato alla pagina "Inserimento soprannome", dove può inserire un "soprannome" da utilizzare al posto della sua "email". Nel caso in cui non gli interessasse, può andare direttamente alla pagina "Calendario" premendo su "salta".
Una volta effettuato l'accesso, l'utente, divenuto utente autenticato, visualizza la schermata "Calendario" da cui:
\begin{itemize}
    \item può accedere alla seconda schermata implementata, ovvero "Eventi";
    \item può fare diverse funzionalità direttamente da questa schermata, come: visualizzare periodi temporali diversi nel calendario, filtrare i calendari che si visualizzano, visualizzare le impostazioni degli eventi presenti nel calendario, creare eventi singoli e calendari direttamente da questa schermata, anziché andando nella schermata "Eventi", dove, però, c'è anche la possibilità di modificare ed eliminare quest'ultimi.
    \begin{comment}
    e creare eventi ripetuti, ovvero eventi che, già in tempo di compilazione di questi, sono definiti su più giorni.
    \end{comment}
\end{itemize}
Si specifica che per "compilazione evento", azione presente sia quando si modifica che crea un evento singolo, si intende la definizione di vari campi, ovvero:
\begin{itemize}
    \item titolo, campo da completare obbligatoriamente per far andare a buon fine la procedura di creazione o modifica evento; nel caso in cui il "titolo" non fosse definito, la procedura di salvataggio dell'evento non può andare a fine e appare un pop-up di errore con scritto "Devi inserire il titolo" e rimane la schermata di creazione evento da completare. Questa procedura è segnalata anche nel diagramma dell' "user flows" con "salvataggio non è andato a buon fine, non tutti i campi obbligatori son stati compilati";
    \item data, campo da completare obbligatoriamente per far andare a buon fine la procedura di creazione o modifica evento; nel caso in cui la "data" non fosse definita, la procedura di salvataggio dell'evento non può andare a fine e appare un pop-up di errore con scritto "Devi inserire una data" e rimane la schermata di creazione evento da completare. Questa procedura è segnalata anche nel diagramma dell' "user flows" con "salvataggio non è andato a buon fine, non tutti i campi obbligatori son stati compilati";
    \item persone, ovvero quali persone partecipano a tale evento. Si specifica, cosa già fatta nell' "userflow", che per inserire una persona, bisogna scrivere l' "email" con cui tale persona si è registrata su PlanIt e schiacciare "invio". A quel punto parte un controllo fatto da noi, per vedere se tale "email" sia valida, ovvero che appartenga ad un utente autenticato registrato nel sito. Nel caso non lo fosse, appare un pop-up "Invalid email". Invece nel caso in cui fosse valida, questa persona viene aggiunta alla lista di persone con cui è condiviso tale calendario e al posto della sua email, appare il suo "username" nel caso in cui ne avesse uno. \\
          Inoltre, nel caso si volesse togliere una persona aggiunta alla lista di "persone", si può premere sulla "x" o "canc" per eliminarla da "persone".
    \item priorità, campo facoltativo;
    \item difficoltà, campo facoltativo;
    \item calendario, ovvero calendario a cui appartiene l'evento che si sta modificando o creando. Questo è un campo da completare obbligatoriamente per far andare a buon fine la procedura di creazione o modifica evento;
    \item notifiche, ovvero quando ricevere la notifica di tale evento.
\end{itemize}
Infine per "compilazione calendario", azione presente sia nella "creazione" che "modifica" calendario, sin intende la definizione di vari campi, ovvero:
\begin{itemize}
    \item persone, ovvero quali persone partecipano a tale calendario, ovvero che partecipano agli eventi appartenenti a tale calendario. Si specifica, cosa già fatta nell' "userflow" che per inserire una persona, bisogna scrivere l' "email" con cui tale persona si è registrata su PlanIt e schiacciare "invio". A quel punto parte un controllo fatto da noi, per vedere se tale "email" sia valida, ovvero che appartenga ad un utente autenticato registrato nel sito. Nel caso non lo fosse, appare un pop-up "Invalid email". Invece nel caso in cui fosse valida, questa persona viene aggiunta alla lista di persone con cui è condiviso tale calendario e al posto della sua email, appare il suo "username" nel caso in cui ne avesse uno. \\
          Inoltre, nel caso si volesse togliere una persona aggiunta alla lista di "persone", si può premere sulla "x" o "canc" per eliminarla da "persone".
    \item nome del calendario, campo che deve essere definito per forza per l'esito positivo della procedura di creazione o modifica; nel caso in cui il "nome" non fosse definito, la procedura di salvataggio del calendario non può andare a fine e appare un pop-up di errore con scritto "Devi inserire il nome" e rimane la schermata di creazione calendario da completare. Questa procedura è segnalata anche nel diagramma dell' "user flows" con "salvataggio non è andato a buon fine, non tutti i campi obbligatori son stati compilati";
    \item colore, campo che deve essere definito per forza per l'esito positivo della procedura di creazione o modifica; questo non è altro che il colore con cui saranno mostrati gli eventi appartenenti a tale calendario;
    \item fuso orario, campo facoltativo;
    \item impostazioni predefinite degli eventi, ovvero definizione di alcuni campi con cui si vanno a precompilare gli eventi appartenenti a quel calendario. Ovviamente, nella creazione o modifica di un evento, questi campi precompilati potranno essere modificati. Si specifica che nelle impostazioni predefinite degli eventi, i seguenti campi sono compresi: durata, priorità, difficoltà, luogo e notifiche.
\end{itemize}
Come già detto precedentemente, dalla schermata "Calendario", si può passare alla schermata "Eventi", dove è possibile:
\begin{itemize}
    \item creare eventi singoli, allo stesso modo che si può fare dalla schermata "Calendario";
    %\item creare eventi ripetuti;
    %\item modificare gli eventi singoli che ripetuti;
    \item modificare gli eventi singoli;
    %\item eliminare sia eventi singoli che ripetuti;
    \item eliminare gli eventi singoli;
    \item creare calendari;
    \item eliminare calendari.
\end{itemize}
Si precisa che in questo prototipo del sito PlanIt non sono stati sviluppati gli eventi ripetuti, dumque schiacciando il bottone "Crea Evento Ripetuto" non si ottiene nessun effetto. \\
Nella prima foto sottostante è presente l'interno "user flow", ma per comodità, visto che è molto grande, abbiamo deciso d' inserire anche due "user flow" che non sono altro che il primo totale, ma diviso in due: uno che mostra l' "user flows" riguardo a tutto il processo di autenticazione, l'altro "user flows" riguarda a ciò che può fare l'utente una volta autenticato ed entrato effettivamente nel sito. In questo modo queste due "macro" azioni, che sono percorribili dall'utente, sono più facilmente visualizzabili. Ad ogni modo, come per tutte le foto, come nota a piè di pagina è presente il link alla repo GitHub, dove è possibile scaricare ciascuna immagine per poterla vedere meglio. \\
Infine, inseriamo anche la legenda con cui sono stati fatti questi "user flows".

\begin{center}
    \includesvg[width=1\textwidth, height=1\textheight]{img/svg/diagrammi/Legenda.svg}
    \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/png/diagrammi/Legenda.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/svg/diagrammi/Legenda.svg}{SVG} Legenda}
    \captionof{figure}{Legenda}
\end{center}

\begin{center}
    \includesvg[width=1\textwidth, height=1\textheight]{img/svg/diagrammi/userflow.svg}
    \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/png/diagrammi/userflow.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/svg/diagrammi/userflow.svg}{SVG} User Flow completo}
    \captionof{figure}{UserFlow completo}
\end{center}

\begin{center}
    \includesvg[width=1\textwidth, height=1\textheight]{img/svg/diagrammi/userFlow_autenticazione.svg}
    \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/png/diagrammi/userflow_autenticazione.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/svg/diagrammi/userflow_autenticazione.svg}{SVG} User Flow - autenticazione}
    \captionof{figure}{UserFlow autenticazione}
\end{center}

\begin{center}
    \includesvg[width=1\textwidth, height=1\textheight]{img/svg/diagrammi/userFlow_calendario.svg}
    \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/png/diagrammi/userflow_calendario.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D4/img/svg/diagrammi/userflow_calendario.svg}{SVG} User Flow all'interno del sito dopo l'autenticazione}
    \captionof{figure}{UserFlow all'interno del sito dopo l'autenticazione}
\end{center}