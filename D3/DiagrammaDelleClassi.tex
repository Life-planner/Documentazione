\section{Diagramma delle classi}
\label{secD3:DiagrammaDelleClassi}

Nel presente capitolo vengono presentate le classi previste nell'ambito del progetto PlanIt. Ogni componente presente nel diagramma dei componenti è stata utilizzato per fare una o più classi. Tutte le classi individuate sono caratterizzate da un nome, una lista di attributi che identificano i dati gestiti dalla classe e una lista di metodi che definiscono le operazioni previste all'interno della classe. Ogni classe può essere anche associata ad altre classi e, tramite questa associazione, è possibile fornire informazioni su come le classi si relazionano tra loro. Anche se, sottolineiamo, che le associazioni fornite tra le classi sono quelle non banali e che non richiedono un'ulteriore specificazione.
Riportiamo di seguito le classi individuate a partire dai diagrammi di contesto e dei componenti. In questo processo si è proceduto anche nel massimizzare la coesione e minimizzare l'accoppiamento tra classi, cercando di evitare la ridondanza.

\begin{listaPersonale}{DCL}

    \elemento[Tipologie di utenti]{dcl:TipologieUtenti}
    Analizzando il diagramma di contesto realizzato per il progetto PlanIt si nota la presenza di tre attori: “utente autenticato standard”, “utente non autenticato” e “utente autenticato premium”, per questo motivo sono state delineate tre classi, ovvero “Utente”, “UtenteAutenticato”, “UtenteNonAutenticato”.\\
    Si è deciso di fare la classe “Utente” in modo tale di unire le due tipologie di utenti, “UtenteAutenticato” e “UtenteNonAutenticato”, che si legano a “Utente” con delle generalizzazioni. L'unica funzionalità che ha “Utente” è il GoHomepage()” che non è altro che l'azione che riporta l' “Utente” nell' Homepage del PlanIt; le funzionalità, che possono essere fatte nella pagina Homepage, verranno descritte nella presentazione della classe “Gestione Homepage” \ref{dcl:Homepage}.\\
    L' “UtenteNonAutenticato” è colui che utilizza il sito in versione demo; che, come abbiamo già descritto in precedenza nel D1 e D2, ha la possibilità di usare il sito con delle limitazioni sulle funzionalità. Queste funzionalità sono presenti in “GestioneSalvataggioDatiInLocale”: l'importanza di questa classe è anche quella di salvare in locale le modifiche effettuate dall' “UtenteNonAutenticato”, infatti nel caso in cui questo decidesse di autenticarsi nel sito, le modifiche effettuate nella versione demo verranno trasferite e salvate nel suo account di “UtenteAutenticato”.\\
    L' “UtenteAutenticato” è colui che accede al sito autenticandosi, ottenendo tutte le funzionalità del sito, però avendo delle limitazioni rispetto all' utente autenticato che si abbona al sito \prettyref{D1-rf:FunzionalitaUtentePremium}. La gestione della sottoscrizione al sito e il passaggio all'account utente autenticato premium è gestito da “GestioneImpostazioniAccount” (\ref{dcl:ImpostazioniAccount}), che verrà presentato successivamente.\\
    La gestione dell'autenticazione viene gestita dalla classe “InterfacciaAuth0”(\ref{dcl:Auth0}), a cui la classe "UtenteAutenticato" è legata mediante un'associazione. Questa classe viene descritta nel paragrafo successivo. Gli unici attributi che ha “UtenteAutenticato” sono i suoi dati più importanti, ovvero: “UserID”, “Email” e “Username”. Questi attributi, ottenuti da Interfaccia di Auth0 dopo l'autenticazione, insieme ad altre impostazioni dell'account, sono salvate nel database MongoDB. Per questo motivo, “UtentiAutenticato” è legato con “GestioneChiamateMongoDB”(\ref{dcl:MongoDB}) che verrà descritto in seguito.

    \begin{center}
        \includesvg[width=1\textwidth, height=1\textheight]{img/svg/DCL/Tipologie_Utenti.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Tipologie_Utenti.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Tipologie_Utenti.svg}{SVG} Diagramma delle classi "Tipologie di Utenti"}
    \end{center}
    \newpage


    \elemento[Interfaccia Auth0]{dcl:Auth0}
    Il diagramma di componenti presentato nel documento D2 presenta un componente chiamato allo stesso modo, ovvero sempre "Interfaccia Auth0" (\prettyref{D2-aci:Auth0}). Questa classe rappresenta il meccanismo di autenticazione degli utenti attraverso il sistema esterno presente anche nel diagramma di contesto, ovvero Auth0. Questa classe si interfaccia con questo sistema esterno di autenticazione, che gestirà completamente la procedura di autenticazione. Il software di PlanIt memorizzerà solo l'"Email", "UserId" e "Username", valori restituiti dall'autenticazione; questi valori sono salvati nella classe, presentata precedentemente, “UtenteAutenticato”, istanziandola. Infatti un utente autenticato non può esser istanziato se non dopo aver effettuato l'autenticazione. \\
    Questa classe fa partire la procedura di autenticazione per un “Utente” una volta che si invoca la funzione “AccessoWebApp()”, presente nella classe “GestioneHomepage”, descritta in \ref{dcl:Homepage}, o si invoca la funzione “Autenticazione()” presente nella classe “UtenteNonAutenticato” (\ref{dcl:TipologieUtenti}). Ricordiamo, che per autenticazione si intende o registrazione o login, a seconda se l' “Utente” abbia o meno un suo account su PlanIt. Infine, tutti gli attributi presenti in questa classe,sono delle URL necessarie per l'accesso alla pagina di autenticazione di Auth0.


    \begin{center}
        \includesvg[width=0.65\textwidth,height=0.55\textheight]{img/svg/DCL/Interfaccia_auth0.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Interfaccia_auth0.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Interfaccia_auth0.svg}{SVG} Diagramma delle classi "InterfacciaAuth0"}
    \end{center}
    \newpage



    \elemento[Impostazioni Utente]{dcl:ImpostazioniAccount}

    Il diagramma di componenti analizzato presenta un componente “Gestione impostazioni account” e altri componenti utilizzati per gestire le impostazioni dell'account. Dunque, è stato identificato la classe “GestioneImpostazioniUtente” che permette all'utente autenticato, insieme alle classi a cui è associato, di modificare e gestire il proprio account secondo le proprie preferenze per le seguenti impostazioni, nella pagina “Impostazioni Account”: sistema di mappe preferito da utilizzare nell'aggiunta del luogo dell'evento, ore di sonno, sottoscrizione all'abbonamento (divenendo “utente autenticato premium”), scelta metodo di pagamento, scelta metodo di utilizzo Google Calendar, modifica password ed username.
    “GestioneImpostazioniUtente” è collegato a “UtenteAutenticato” in modo tale che ogni volta che l'utente autenticato va a modificare le proprie impostazioni account, queste sono salvate su MongoDB; infatti, ricordiamo, che “UtenteAutenticato” è collegato alla classe “Gestione chiamate MongoDB” che verrà descritto successivamente in (\ref{dcl:MongoDB}).


    \begin{center}
        \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/Impostazioni_Utente.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Impostazioni_Utente.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Impostazioni_Utente.svg}{SVG} Diagramma delle classi "Impostazioni Utente"}
    \end{center}
    \newpage


    \begin{listaPersonale2}[DCL]{}

        \elemento[Gestione modifica password e Auth0 management API]{dcl:ModificaPasswordAuth0API}
        Analizzando il diagramma di componenti si nota la presenza di “Gestione modifica password” e “Interfaccia management API Auth0”, per questo motivo sono state fatte queste classi con gli stessi nomi. Il loro scopo è gestire il modifica password, azione che può essere fatta dalle impostazioni account, e il reset password, azione che si può fare nel caso in cui si volesse recuperare e cambiare la password quando si è dimenticata, partendo dalla pagina di autenticazione di PlanIt. La nuova password inserita viene controllata in “GestioneModificapassword” mediante la funzione "ControlloValiditaPassword", in modo tale che la password segui le regole delineate in \prettyref{D1-rnf:SicurezzaPassword}. Una volta che la nuova password passa il controllo, viene inviata ad Auth0 grazie alla funzione “CambiaPassword(UserId, nuovaPassword) presente in “Auth0ManagementAPI”.
        Infine, è da notare che inizialmente "Abbonato" è inizializzato a "false", in quanto quando un utente si registra al sito, è sempre un utente autenticato standard e non può registrarsi fin da subito come utente autenticato premium.
        \todo{cambiare foto togliendo ControlloSetPassword}

        \begin{center}
            \includesvg[width=0.55\textwidth,height=0.40\textheight]{img/svg/DCL/Gestione_modificaPassword.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Gestione_modificaPassword.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Gestione_modificaPassword.svg}{SVG} Diagramma delle classe "Gestione modifica password e Auth0 management API"}
        \end{center}



        \elemento[Gestione Abbonamento]{dcl:Abbonamento}
        Il diagramma di contesto analizzato nel documento D2 presenta un terzo attore che è stato già citato in \ref{dcl:TipologieUtenti}, ovvero l'utente autenticato premium. Quest'ultimo usufruisce di un abbonamento al sito, accedendo alla versione premium della piattaforma. Per questo motivo è stata fatta la classe “GestioneAbbonamento”, il cui scopo è gestire la sottoscrizione e cancellazione dell'abbonamento. Inoltre, grazie a questa classe, è possibile sapere se un utente autenticato sia standard (attributo "Abbonato" = false) o premium (Abbonato = true). \\
        Infine, come si può notare, è presente una composition tra “GestioneImpostazioniUtente” e “GestioneAbbonamento” il cui scopo è indicare che la classe “contenuta”, “GestioneAbbonamento”, esiste solo con la classe “contenitrice”, “GestioneImpostazioniUtente”; infatti la classe “GestioneAbbonamento” ha senso ed esiste solo se l'utente ha le “GestioneImpostazioniUtente”, ovvero è autenticato.


        \begin{center}
            \includesvg[width=0.85\textwidth,height=0.80\textheight]{img/svg/DCL/Abbonamento.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Abbonamento.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Abbonamento.svg}{SVG} Diagramma delle classi "Abbonamento"}
        \end{center}



        \elemento[Gestione Google Calendar]{dcl:GoogleCalendar}
        Analizzando il diagramma di componenti realizzato per il progetto PlanIt, si nota la presenza dei componenti “Gestione utilizzo Google Calendar”, “Gestione sincronizzazione” e “Gestione import/export file”, per questo motivo sono state fatte queste tre classi ("GestioneGoogleCalendar", "GestioneImport/Export" e "GestioneSincronizzazione"). \\
        Queste classi hanno lo scopo di gestire l'integrazione ed interazione di PlanIt con Google Calendar. \\
        “GestioneGoogleCalendar” contiene l'attributo “sincronizzazione” il cui scopo è quello di salvare quale sia il metodo di integrazione di Google Calendar utilizzato dall'utente autenticato; infatti l'utente autenticato può scegliere solo un metodo alla volta di interazione con Google Calendar.
        Inoltre, questa classe permette il cambio della tipologia di interazione con Google Calendar usufruendo delle classi “GestioneImport/Export” e “GestioneSincronizzazione” che gestiscono rispettivamente i processi di import/export di file di eventi o calendari di Google Calendar da e/o verso PlanIt e la sincronizzazione (l'account Google viene collegato con quello PlanIt) con Google Calendar, con cui avviene l'importazione ed esportazione di eventi e calendari automaticamente.


        \begin{center}
            \includesvg[width=0.75\textwidth,height=0.65\textheight]{img/svg/DCL/GestioneGoogleCalendar.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GestioneGoogleCalendar.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GestioneGoogleCalendar.svg}{SVG} Diagramma delle classi "Gestione Google Calendar"}
        \end{center}
        \newpage


        \elemento[Gestione sistema di pagamento]{dcl:SistemaPagamento}
        Il diagramma dei componenti analizzato, realizzato per il progetto PlanIt, presenta i componenti “Gestione metodo di pagamento”, “Interfaccia PayPal” e “Interfaccia Payments”, per questo motivo sono state pensate queste cinque classi: “GestioneSistemaDiPagamento”, “GestioneSistemaDiPagamentoStripe”, “GestioneSistemaDiPagamentoPayPal”, “InterfacciaPayPalAPI” e “InterfacciaStripeAPI”. La funzione di queste classi è gestire il pagamento dell'abbonamento e cambiamento del metodo di pagamento di quest'ultimo. \\
        “GestioneSistemaDiPagamento” salva il giorno di fatturazione dell'abbonamento dell'utente autenticato premium e permette, come si nota, il cambiamento del metodo di pagamento, il quale può esser scelto tra PayPal e Stripe.\\
        “GestioneSistemaDiPagamentoPayPal”, “GestioneSistemaDiPagamentoStripe, “InterfacciaPayPalAPI” e “InterfacciaStripeAPI” gestiscono il processo di pagamento dell'abbonamento mediante il metodo di pagamento “PayPal” e “Stripe” rispettivamente, conservando, una volta inserite, le credenziali di pagamento per questi sistemi dell'utente autenticato premium, in modo tale che il pagamento dell'abbonamento possa avvenire in automatico ogni mese.\\
        Come si può notare, è presente un'"aggregation" tra "GestioneImpostazioniUtente" e "GestioneSistemiDiPagamento" che serve ad indicare che "GestioneSistemiDiPagamento" "is part of" "GestioneSistemiDiPagamento".


        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/Gestione_pagamento.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Gestione_pagamento.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Gestione_pagamento.svg}{SVG} Diagramma delle classi "Gestione Sistema di Pagamento"}
        \end{center}

    \end{listaPersonale2}
    \newpage

    \elemento[Gestione Visualizzazione Calendari]{dcl:VisualizzazioneCalendari}

    Analizzando il diagramma di componenti fatto per il progetto PlanIt si può vedere la presenza di “Gestione visualizzazione calendari ed eventi”, “Gestione Attività”, “Gestione filtro impegni” e “GestioneFiltriCalendari”. Per questa ragione sono state ideate le seguenti classi: “GestioneVisualizzazioneCalendari”,  “GestioneInformazioniEvento”, “GestioneFiltroEventi”, “GestioneFiltriCalendari” e “GestioneAttività”. Queste classi permettono la visualizzazione di calendari ed eventi nella schermata Calendario \prettyref{D1-fe:SchermataPrincipale} anche visualizzandoli seguendo dei filtri che può inserire l'utente.\\
    “GestioneVisualizzazioneCalendari” ottiene da “GestionechiamateMongoDB” i calendari dell'utente che mostra a quest'ultimo. Dopo, grazie a “GestioneFiltriCalendari”, possono essere mostrati i calendari secondo dei filtri definiti dall'utente: ovvero questo'ultimo definisce quale calendari visualizzare nella schermata "Calendario".\\
    In seguito, “Gestione filtro Eventi” può mostrare una lista di eventi secondo dei criteri delineati dall'utente.\\
    “Gestione Attività”  permette all'utente di visualizzare la lista degli eventi giornalieri, permettendo a quest'ultimo di segnare il completamento o meno dell'attività o anche l'eliminazione di questa. L'eliminazione o l'indicazione di non completamento dell'attività porta alla riprogrammazione del calendario.\\
    Infine, la classe "GestioneInformazioneEvento" permette all'utente, nel caso in cui andasse a premere un evento presente nella schermata "Calendario", di visualizzare tute le informazioni riguardanti l'evento creato. Per sapere quali informazioni vengono visualizzate si guardi \prettyref{D2-aci:mostraInformazioni}.


    \begin{center}
        \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/VisualizzazioneCalendario.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/VisualizzazioneCalendario.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/VisualizzazioneCalendario.svg}{SVG} Diagramma delle classi "Gestione Visualizzazione Calendari"}
    \end{center}
    \newpage


    \elemento[Dashboard]{dcl:Dashboard}
    Il diagramma dei componenti esibisce i seguenti componenti: “Gestione Dashboard”, “Gestione eventi settimanali” e “Gestione eventi giornalieri”. Dunque, sono state progettate le classi “GestioneDashboard”, “GestioneDashboardEventiSettimanali” e “GestioneDashboardEventiGiornalieri”, che hanno il fine è di mostrare dei grafici per fornire delle informazioni sull'uso del tempo all'utente.
    La classe “GestioneDashboard” ottiene da “GestioneChiamateMongoDB” i calendari di un utente, in modo tale da poter avere anche tutti i suoi eventi. Grazie agli eventi mostra una HeatMap, il cui scopo è già stato descritto in \prettyref{D2-uc:InformazioniUsoDelTempo}, e passa gli eventi settimanali a “GestioneDashboardEventiSettimanali" e quelli giornalieri a “GestioneDashboardEventiGiornalieri”. \\
    Dunque, grazie a ciò, queste due classi possano mostrare altri grafici riguardanti gli eventi, nel periodo di tempo considerato, mediante i grafici citati in \prettyref{D2-uc:InformazioniUsoDelTempo} (grafico a barre per “GestioneDashboardEventiSettimanali” e grafico a torta con lista di eventi per “GestioneDashboardEventiGiornalieri”).\\
    Infine, è giusto citare che l'utente possa interagire con tutti i grafici sopra citati, selezionando particolari calendari o attività che sono presenti nei rispettivi grafici: in questo modo si può ottenere una visualizzazione più "personalizzata".


    \begin{center}
        \includesvg[width=0.75\textwidth,height=0.65\textheight]{img/svg/DCL/Dashboard.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Dashboard.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Dashboard.svg}{SVG} Diagramma delle classi "Dashboard"}
    \end{center}

    \newpage


    \elemento[Gestione evento e calendario]{dcl:GestioneEventoCalendario}
    Il diagramma dei componenti analizzato, realizzato per il progetto PlanIt, presenta i componenti “Gestione creazione o modifica evento” e “Gestione creazione e modifica calendario” e dei componenti a loro associati. Per questo motivo, sono state fatte le classi “Calendario” e “Evento” e delle classi a loro associate, che si possono vedere nella foto sottostante, che hanno l'obiettivo di permettere all'utente di poter creare o modificare eventi e calendari secondo le modalità già descritte in \prettyref{D2-uc:CreazioneModificaEvento} e \prettyref{D2-uc:CreazioneModificaCalendario}.


    \begin{center}
        \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/GestioneEventoCalendario.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GestioneEventoCalendario.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GestioneEventoCalendario.svgg}{SVG} Diagramma delle classi "Gestione evento e calendario"}
    \end{center}
    \newpage



    \begin{listaPersonale2}[DCL]{}
        \elemento[Gestione creazione o modifica calendario]{dcl:CreazioneModificaCalendario}

        Analizzando il diagramma di componenti fatto per il progetto PlanIt, si può vedere la presenza del componente “Gestione creazione o modifica calendario”, per questa ragione sono state ideate le classi “GestioneImpostazioniPredefiniteEventi” e “Calendario”  che gestiscono la procedura di creazione o modifica di un calendario, secondo le impostazioni scelte dall'utente. \\
        Quando l'utente va a modificare o creare un calendario può andare anche a definire dei valori con cui precompilare alcuni campi presenti nella creazione o modifica evento: lo scopo di “GestioneImpostazioniPredefiniteEventi” è quello di gestire la procedura di definizione di questi campi, andando anche a salvare i loro valori. Una volta che un calendario è stato creato o modificato, questo viene salvato su MongoDB grazie alla classe “GestioneChiamateMongoDB” che lo invia al sistema esterno di archiviazione MongoDB (si noti l'associazione tra “Calendario” e “Gestione chiamate MongoDB).
        “GestioneChiamateMongoDB” viene presentato più nel dettaglio successivamente (\ref{dcl:MongoDB}).
        Si specifica, che i vari set e get degli attributi presenti in “GestioneImpostazioniPredefiniteEventi” e “Calendario” non sono stati scritti, nella lista di funzioni di tali classi, in quanto ritenute banali.


        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/CreazioneModificaCalendario.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/CreazioneModificaCalendario.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/CreazioneModificaCalendario.svg}{SVG} Diagramma delle classi "Gestione creazione o modifica calendario"}
        \end{center}
        \newpage


        \elemento[Gestione creazione o modifica evento]{dcl:CreazioneModificaEvento}

        \todo{(ricordati di menzionare impostazioni predefinite eventi) → ottenute dal calendario, in realtà ne ho parlato nelle altre classi che sono collegate con impostazioni predefinite eventi}

        Analizzando il diagramma di componenti, fatto per il progetto PlanIt, si può vedere la presenza dei componenti “Gestione creazione o modifica evento” e “Gestione notifiche”, per questa ragione sono state ideate le classi “Notifica” e “Evento”. \\
        La seconda classe citata gestisce la procedura di creazione o modifica dell'evento secondo i valori scelti per i vari attributi presenti nella classe “Evento” (si veda anche \prettyref{D2-uc:CreazioneModificaEvento}). Invece, la classe “Notifica” gestisce la procedura di creazione o modifica della notifica per quel specifico evento che si sta creando o modificando, per questo motivo è presente un'associazione tra “Evento” e “Notifica”.\\
        Come si può notare è presente una “composition” tra “Evento” e “Calendario” che serve ad indicare che un evento, “oggetto contenuto”, esiste solo con l'oggetto “contenitore” “Calendario”: infatti un evento non può non essere non associato ad un calendario.\\
        Sono state definite anche le classi “EventoSingolo”, “EventoRipetuto”, “GestioneRipetizioneBase”, "GestioneRipetizioneAvanzate” e “GestioneGiornata” che hanno la funzionalità di gestire il processo di definizione temporale di quando avviene l'evento che si sta modificando o creando. Sono state individuate due classi distinte “GestioneRipetizioneBase” e “GestioneRipetizioneAvanzate”, utilizzate per gestire la definizione di un evento ripetuto, in quanto la prima classe citata viene utilizzata per sovrintendere la determinazione di un evento di cui viene definito il numero di volte in cui viene ripetuto senza indicare quali giornate, e la seconda classe, al contrario, viene utilizzata per sovrintendere la determinazione di un evento ripetuto di cui si indica anche le giornate in cui è presente. \\
        Si specifica, che i vari set e get degli attributi presenti in “Evento”, “Notifica”, “EventoRipetuto”, EventoSingolo”, "GestioneRipetizioneBase”, “GestioneRipetizioneAvanzate” e “GestioneGiornata” non sono stati scritti, nelle liste di funzioni di tali classi, in quanto ritenute banali.


        \begin{center}
            \includesvg[width=0.90\textwidth,height=0.80\textheight]{img/svg/DCL/CreazioneModificaEvento.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/CreazioneModificaEvento.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/CreazioneModificaEvento.svg}{SVG} Gestione creazione o modifica evento}
        \end{center}



        \elemento[Gestione Luoghi]{dcl:GestioneLuoghi}

        Il diagramma dei componenti analizzato, realizzato per il progetto PlanIt, presenta un componente “Interfaccia mappe”, per questa ragione sono state fatte le classi “Gestione Luoghi”, “InterfacciaGoogleMapsAPI” e “InterfacciaOpenStreetMapAPI”, che hanno lo scopo di gestire la definizione delle coordinate del luogo dove avviene un evento. Poiché la definizione del luogo di eventi può esser definito sia dalle “GestioneImpostazioni PredefiniteEventi” in fase di creazione o modifica calendario (il luogo appartiene ad uno dei campi che può esser precompilato) e può esser definito anche in fase di creazione o modifica evento, questa classe “Gestione Luoghi” è legata sia a “GestioneImpostazioni PredefiniteEventi” sia a “Evento”.
        Sono state inserite due classi “InterfacciaGoogleMapsAPI” e “InterfacciaOpenStreetMapAPI”, che hanno lo scopo di gestire la procedura di conversione dell'indirizzo del luogo inserito in coordinate, mediante l'utilizzo delle piattaforme “Google Maps” e “OpenStreetMap”, rispettivamente. Infatti, si ricorda, che l'utente autenticato può decidere, secondo le proprie preferenze, da impostazioni account (\ref{dcl:ImpostazioniAccount}) quale sistema di mappe utilizzare.


        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/GestioneLuoghi.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GestioneLuoghi.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GestioneLuoghi.svg}{SVG} Diagramma delle classi "Gestione luoghi"}
        \end{center}
        \newpage



        \elemento[Gestione condivisione]{dcl:GestioneCondivisione}

        Analizzando il diagramma di componenti, fatto per il progetto PlanIt, si può vedere la presenza del componente “Gestione condivisione”, allora è stata fatta la classe “GestioneCondivisione", che ha la funzionalità di gestire la procedura di condivisione di calendari ed eventi; infatti, come si può osservare dall'immagine in \ref{dcl:GestioneEventoCalendario}, questa classe ha un’ “association” sia con “Evento” che con “Calendario”.  \\
        La condivisione viene effettuata utilizzando l’email dei partecipanti a cui condividere l’evento o il calendario e un link, di tipo stringa, contenente il riferimento al dato di tipo "Tipo\_Link\_Richiesta" (\ref{dcl:TipoLinkRichiesta}), che contiene le informazioni fondamentali riguardanti l’ “Evento” o “Calendario” che si sta condividendo. Per poter capire cosa contenga l’oggetto di tipo Tipo\_Link\_Richiesta a cui fa riferimento “link”, si legga \ref{dcl:TipoLinkRichiesta}. Dunque, grazie all’email del partecipante e tale link, questa classe invia la richiesta di condivisione, salvando l’esito di tale richiesta nell’attributo booleano “Accettata”. Nel caso in cui la richiesta fosse accettata, gli “utenti autenticati”, che hanno accettato la condivisione, vengono aggiunti nell’attributo "Partecipanti" di o “Evento” o “Calendario”, a seconda di cosa si sta condividendo.


        \begin{center}
            \includesvg[width=0.45\textwidth,height=0.35\textheight]{img/svg/DCL/GestioneCondivisione.svg}
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GestioneCondivisione.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GestioneCondivisione.svg}{SVG} Diagramma delle classi "Gestione Condivisione"}
        \end{center}


    \end{listaPersonale2}


    \elemento[Interfaccia Cloudflare]{dcl:CloudFlare}

    Analizzando il diagramma di contesto realizzato per il progetto PlanIt, si nota la presenza del sistema esterno “Cloudflare”, per questa ragione è stata fatta questa classe “InterfacciaCloudFlare” che permette ottenere il log di tutte le connessioni che sono state effettuate per accedere al sito, con il resoconto se sono state filtrare o meno. \\
    Per ottenere tali informazioni la classe si interfaccia al sistema esterno Cloudflare.


    \begin{center}
        \includesvg[width=0.85\textwidth,height=0.75\textheight]{img/svg/DCL/Cloudflare.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Cloudflare.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Cloudflare.svg}{SVG} Diagramma delle classi "Interfaccia CloudFlare"}
    \end{center}
    \newpage



    \elemento[Gestione Homepage]{dcl:Homepage}
    \todo{typo, "lisa" al posto di "lista"}
    Il diagramma dei componenti analizzato, realizzato per il progetto PlanIt, presenta le componenti “Gestione Homepage” e “Interfaccia Iubenda”, dunque sono state ideate le classi “InterfacciaIubenda”, “GestioneHomepage” e “Tipo\_Cookie”.\\
    La classe “GestioneHomepage” gestisce la procedura di scelta, effettuata da un utente che vuole entrare nel sito, di entrare nel sito in modalità demo (in questo caso c'è l'esecuzione della funzione "AccessoProvaDemo()"), accedendo da utente non autenticato, o entrare nella web app autenticandosi (c'è l'esecuzione del metodo "AccessoProvaDemo()"), ovvero registrandosi o accedendo tramite Auth0 su PlanIt. Infatti, qualora l'utente abbia deciso di accedere alla web app con l' autenticazione, verrà indirizzato alla pagina di gestione login e registrazione di Auth0 grazie all' “InterfacciaAuth0”, attraverso la funzione “RedirectToAuthentication()” presente in quest'ultima classe citata. Ad autenticazione avvenuta, l'utente, divenuto, autenticato verrà indirizzato alla web app. \\
    Dunque, questa classe gestisce l'indirizzamento dell'utente nella modalità del sito scelta. \\ “GestioneHomepage” mostra anche il banner di cookie contenente le cookie policy che possono essere accettate o meno dall'utente. Il banner di cookie, come anche le politiche di privacy, sono gestite e ottenute dalla classe “InterfacciaIubenda”, a cui “GestioneHomepage” è legata. “InterfacciaIubenda”, interfacciandosi con Iubenda, invia ad' “GestioneHomepage” il codice del banner di cookie contenente anche il link alla pagina di politiche di privacy. Una volta accettati i cookie, questi vengono salvati in "GestioneHomepage" nell'array “Cookie”, il cui tipo è “Tipo\_cookie”, dove sono presenti i cookie salvati nel browser dell' Utente.\\
    Si sottolinea che solo i cookie accettati saranno presenti nell'attributo "Cookie" presente in "GestioneHomepage"; infatti, come si può notare, grazie all' "InterfacciaIubenda" è possibile accettare anche solo una parte dei cookie.


    \begin{center}
        \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/Homapage.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Homapage.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Homapage.svg}{SVG} Diagramma delle classi "Homepage"}
    \end{center}
    \newpage


    \elemento[Tipo calendario filtrato]{dcl:CalendarioFiltrato}

    Nella classe “GestioneFiltriCalendari” (\ref{dcl:VisualizzazioneCalendari}) è presente un attributo di tipo “Tipo\_Calendario\_Filtrato”, tipo di dato che non avevamo ancora descritto. La classe “Tipo\_Calendario\_Filtrato” è stata delineata per definire il tipo di calendario che viene utilizzato nella classe “GestioneFiltriCalendari”. Questo tipo permette di andare a selezionare e deselezionare un calendario, azioni fondamentali per andare a filtrare i calendari.


    \begin{center}
        \includesvg[width=0.40\textwidth,height=0.30\textheight]{img/svg/DCL/Tipo_Calendario_Filtrato.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Tipo_Calendario_Filtrato.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Tipo_Calendario_Filtrato.svg}{SVG} Diagramma delle classi "Tipo calendario filtrato"}
    \end{center}




    \elemento[Tipo Fuso orario]{dcl:FusoOrario}

    Nella classe “Calendario” (\ref{dcl:CreazioneModificaCalendario}) è presente un attributo di tipo “Tipo\_Fuso\_Orario”, tipo di dato che non avevamo ancora descritto. \\
    La classe “Tipo\_Fuso\_Orario” è stata delineata per definire il tipo di dato dell'attributo “FusoOrario”: questo tipo permette di salvare, prendere (get) e impostare (set) l'offset del fuso orario del calendario che stiamo andando a creare o modificare e il nome della località che ha tale fuso orario. L'intero presente in “GMToffset” è un offset rispetto al GMT, ovvero l'orario di Greenwich, dunque l'attributo salvato è ad esempio: “+1”, “+2”, “-1”, e così via. Le funzione set() e get() di “GMToffset” e “Località” non sono state inserite nel diagramma della classe perché ritenute banali. Per vedere l'utilità della funzionalità del fuso orario di un calendario, si legga \prettyref{D2-uc:ModificaCalendarioNonAutenticato}.


    \begin{center}
        \includesvg[width=0.45\textwidth,height=0.35\textheight]{img/svg/DCL/Tipo_fuso_orario.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Tipo_fuso_orario.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Tipo_fuso_orario.svg}{SVG} "Diagramma delle classi "Tipo Fuso Orario"}
    \end{center}
    \newpage


    \elemento[Tipo\_Luogo]{dcl:TipoLuogo}

    Nelle classi “GestioneImpostazioniPredefiniteEventi” (\ref{dcl:CreazioneModificaCalendario}) e “Evento” (\ref{dcl:CreazioneModificaEvento}) è presente l'attributo “Luogo” di tipo “Tipo\_Luogo”, tipo di dato che non avevamo ancora descritto. Questo tipo permette di salvare il valore della “Latitudine” e “Longitudine”, ovvero le coordinate, del luogo dove avviene un evento. La definizione del luogo, dove avviene un evento, è presente nella classe creazione o modifica di un evento o nelle impostazioni predefinite di calendario, dove andiamo a definire il luogo con cui andare a precompilare gli eventi che stiamo creando appartenenti a quel calendario. Il valore della latitudine e longitudine di un luogo viene restituito dalla funzione “ConvertiIndirizzoToCoordinate(Indirizzo)” presente in “GestioneLuoghi”, classe già presentata in \ref{dcl:GestioneLuoghi}.


    \begin{center}
        \includesvg[width=0.45\textwidth,height=0.35\textheight]{img/svg/DCL/Tipo_Luogo.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Tipo_Luogo.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Tipo_Luogo.svg}{SVG} Diagramma delle classi "Tipo Luogo"}
    \end{center}




    \elemento[Tipo Data]{dcl:TipoData}
    Nella classe “Notifica” (\ref{dcl:CreazioneModificaEvento}) è presente l'attributo “Data” di tipo “Tipo\_Data”, tipo di dato che non avevamo ancora descritto. Questo tipo di dato permette di andare a salvare, definire e ottenere il valore di ora, minuti, giorno, mese anno di quando deve essere inviata una notifica. \\
    Le funzione set() e get() di “Ora”, “Minuti”, “Giorno”, “Mese” e “Anno” non sono state inserite nel diagramma della classe perché ritenute banali.


    \begin{center}
        \includesvg[width=0.40\textwidth,height=0.30\textheight]{img/svg/DCL/Tipo_Data.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Tipo_Data.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Tipo_Data.svg}{SVG} Diagramma delle classi "Tipo Data"}
    \end{center}
    \newpage



    \elemento[Gestione chiamate MongoDB]{dcl:MongoDB}
    Il diagramma dei componenti analizzato, realizzato per il progetto PlanIt, presenta un componente “Gestione chiamate MongoDB”, per questo motivo è stata fatta questa classe, "GestioneChiamateMongoDB", il cui scopo è gestire, come dice il nome, le chiamate al sistema esterno MongoDB. Queste interazioni con MongoDB, possono essere sia di accesso a contenuti presenti nel database MongoDB, sia invio di dati a quest'ultimo. I dati che vengono salvati su MongoDB, e quindi gestiti nelle chiamate di questa classe, riguardano: i calendari, eventi e l'account (ovvero, "UserID" e "Email", "Username", attributi presenti in "UtenteAutenticato", \ref{dcl:TipologieUtenti} e le impostazioni utente, ovvero gli attributi presenti in “GestioneImpostazioniUtente”, \ref{dcl:ImpostazioniAccount}, di un utente autenticato). Per questa ragione sono presenti, in questa classe, delle funzioni per permettere l'invio e la richiesta di ricezione di questa tipologia di dati.


    \begin{center}
        \includesvg[width=0.50\textwidth,height=0.40\textheight]{img/svg/DCL/GestioneChiamateMongoDB.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GestioneChiamateMongoDB.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GestioneChiamateMongoDB.svg}{SVG} Diagramma delle classi "Gestione chiamate MongoDB"}
    \end{center}


    \elemento[Tipo Link Richiesta]{dcl:TipoLinkRichiesta}
    Nella classe "Gestione condivisione" è presente il parametro "link", stringa che fa riferimento ad un oggetto di tipo "Tipo\_Link\_Richiesta", tipo di dato che non avevamo ancora descritto.
    L’oggetto a cui fa riferimento il “link” contiene: "Account", "IDEvento" o "IDCalendario". L’Account è fondamentale per poter individuare univocamente chi ha inviato la richiesta, invece "IDEvento" o "IDCalendario" sono fondamentali per definire cosa si sta condividendo. Infatti, nel caso in cui si accettasse la richiesta, il sistema deve sapere a quale oggetto “Evento” o “Calendario”, presente su MongoDB (in quanto questi oggetti vengono salvati su questo sistema esterno di archiviazione), si sta facendo riferimento; infatti, nel database c’è una singola istanza per ciascuno oggetto che è stato condiviso.\\
    Ottenendo il riferimento a tale oggetto di tipo “Tipo\_Link\_Richiesta”, l’ “UtenteAutenticato”, a cui abbiamo inviato l’invito alla condivisione, può accettare ("accettaRichiesta()") o meno ("rifiutaRichiesta()") la condivisione. Nel caso in cui accettasse la condivisione, come specificato in (\ref{dcl:GestioneCondivisione}), tale “UtenteAutenticato” viene aggiunto all’attributo “Partecipanti” dell’oggetto che si stava condividendo e l’ “Evento” o “Calendario” accettato viene aggiunto nella lista di eventi condivisi o “Calendari”, a seconda se si è ricevuto la richiesta di condivisione per un “Calendario” o “Evento, del proprio account PlanIt.


    \begin{center}
        \includesvg[width=0.5\textwidth,height=0.4\textheight]{img/svg/DCL/Tipo_Link_Richiesta.svg}
        \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/Diagrammi/png/path/to/img.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/Diagrammi/svg/path/to/img.svg}{SVG} Diagramma delle classi "Tipo Link Richiesta"}
    \end{center}
    \newpage
    \elemento[Diagramma delle classi complessivo] {dcl:DiagrammaComplessivo}
        Riportiamo di seguito il diagramma complessivo, con tutte le classi sopra descritte.\\
        Il primo grafico riportato mostra tutto il diagramma delle classi comprendendo sia i tipi di dati e anche classi che sono scollegate tra loro.
        Il secondo grafico riportato mostra la maggior parte delle classi che abbiamo collegato tra loro.\\
        ll terzo grafico riportato mostra le classi che gestiscono l' "Homepage".\\
        ll quarto grafico riportato mostra le classi che gestiscono l' interfaccia di Iubenda.\\
        Il quinto grafico riportato mostra dei tipi di dati usati nella classi
        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/GraficoComplessivo/GraficoTotale.svg}
            Diagramma delle classi, grafico totale
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GraficoComplessivo/GraficoTotale.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GraficoComplessivo/GraficoTotale.svg}{SVG} Diagramma delle classi, grafico totale}
        \end{center}
        \newpage
        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/GraficoComplessivo/complessivo_1.svg}
            Secondo grafico, visuale totale
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GraficoComplessivo/complessivo_1.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GraficoComplessivo/complessivo_1.svg}{SVG} Secondo grafico, visuale totale}
        \end{center}
        \newpage
        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/GraficoComplessivo/AltoSx.svg}
            Secondo grafico, visuale in alto a sinistra
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GraficoComplessivo/AltoSx.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GraficoComplessivo/AltoSx.svg}{SVG} Secondo grafico, visuale in alto a sinistra}
        \end{center}
        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/GraficoComplessivo/AltoDx.svg}
            Secondo grafico, visuale in alto a destra
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GraficoComplessivo/AltoDx.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GraficoComplessivo/AltoDx.svg}{SVG} Secondo grafico, visuale in alto a destra}
        \end{center}
        \newpage
        \begin{center}
            \includesvg[width=0.95\textwidth,height=0.85\textheight]{img/svg/DCL/GraficoComplessivo/BassoSx.svg}
            Secondo grafico, visuale in basso a sinistra
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GraficoComplessivo/BassoSx.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GraficoComplessivo/BassoSx.svg}{SVG} Secondo grafico, visuale in basso a sinistra}
        \end{center}
        \begin{center}
            \includesvg[width=0.9\textwidth,height=0.8\textheight]{img/svg/DCL/GraficoComplessivo/BassoDx.svg}
            Secondo grafico, visuale in basso a destra
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GraficoComplessivo/BassoDx.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GraficoComplessivo/BassoDx.svg}{SVG} Secondo grafico, visuale in basso a destra}
        \end{center}
        \newpage
        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/GraficoComplessivo/TipiDiDati.svg}
            Terzo grafico, Tipi di dati
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/GraficoComplessivo/TipiDiDati.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/GraficoComplessivo/TipiDiDati.svg}{SVG} Diagramma delle classi, Tipi di dati}
        \end{center}
        \begin{center}
            \includesvg[width=1\textwidth,height=1\textheight]{img/svg/DCL/Homapage.svg}
            Quarto grafico, Gestione Homepage
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Homapage.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Homapage.svg}{SVG} Diagramma delle classi "Homepage"}
        \end{center}
        \newpage
        \begin{center}
            \includesvg[width=0.85\textwidth,height=0.75\textheight]{img/svg/DCL/Cloudflare.svg}
            \\Quinto grafico, Interfaccia CloudFlare
            \blfootnote{Immagine \href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/png/DCL/Cloudflare.png}{PNG}/\href{https://github.com/Life-planner/Documentazione/blob/main/D3/img/svg/DCL/Cloudflare.svg}{SVG} Diagramma delle classi "Interfaccia CloudFlare"}
        \end{center}






\end{listaPersonale}